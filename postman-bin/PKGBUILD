# Maintainer: Sid Karunaratne <sid@karunaratne.net>

pkgname=postman-bin
_pkgname=postman
pkgver=10.21.0
pkgrel=1
pkgdesc="Build, test, and document your APIs faster"
provides=('postman')
conflicts=('postman')
arch=('amd64')
url="https://www.getpostman.com"
options=(!strip)
license=('custom')
source=(
	"Postman-linux-x64-${pkgver}.tar.gz::https://dl.pstmn.io/download/version/${pkgver}/linux64"
	"postman.desktop"
)
depends=(libxss1 libnss3 libgtk-3-dev)
sha512sums=('3b92efbeed8d7447e772bdb4557e82eec2aebc238db6bf7dc80a463344edd38a4d166761c82b4697e07cc2525096dc6f2c48b8b17e7aa25f0b4f0d53bee11f06'
            'c4028e52946e724f5acba4068d341eea51eb82688596898bfbcab227b22adc2390e9594b98ad58c6e8f9cb67572712d827aab8b029089ee39f531717f18bdf51')

package() {
	# Install files
	install -dm755 "${pkgdir}/opt/"
	cp -r "Postman" "${pkgdir}/opt/postman"
	install -dm755 "${pkgdir}/usr/bin"
	ln -s "/opt/postman/Postman" "${pkgdir}/usr/bin/postman"

	# Desktop file
	install -D -m644 "postman.desktop" \
	"${pkgdir}/usr/share/applications/postman.desktop"

	# Icon
	install -d -m755 "${pkgdir}/usr/share/icons/hicolor/128x128/apps"
	ln -s "/opt/postman/app/resources/app/assets/icon.png" \
	"${pkgdir}/usr/share/icons/hicolor/128x128/apps/postman.png"
}
